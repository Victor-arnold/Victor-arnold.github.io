<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-新的文章" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/20/%E6%96%B0%E7%9A%84%E6%96%87%E7%AB%A0/" class="article-date">
  <time datetime="2022-08-20T00:57:38.000Z" itemprop="datePublished">2022-08-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/20/%E6%96%B0%E7%9A%84%E6%96%87%E7%AB%A0/">新的文章</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="OpenPcDet：张子骐有点傻"><a href="#OpenPcDet：张子骐有点傻" class="headerlink" title="OpenPcDet：张子骐有点傻"></a>OpenPcDet：张子骐有点傻</h1><h3 id="1-基于点云的三维目标检测"><a href="#1-基于点云的三维目标检测" class="headerlink" title="1.基于点云的三维目标检测:"></a>1.基于点云的三维目标检测:</h3><p>输入：三维的无序点云。（CNN很难提取特征）</p>
<p>输出：3D bounding box （三维坐标，长宽高，朝向）</p>
<ul>
<li><h3 id="如何在不规则点云上提取特征："><a href="#如何在不规则点云上提取特征：" class="headerlink" title="如何在不规则点云上提取特征："></a>如何在不规则点云上提取特征：</h3><ul>
<li>切片投影至2D的俯视图上。2D CNN 鸟瞰图（损失高度信息）</li>
<li>3D Voxel CNN（密度太小：进行稀疏卷积）：体素化为3D网格。体素特征编码（VFE）。</li>
<li>PointNet++。在原始不规则电云直接提取特征。        </li>
</ul>
</li>
<li><h3 id="如何在提取出的特征中检测物体"><a href="#如何在提取出的特征中检测物体" class="headerlink" title="如何在提取出的特征中检测物体"></a>如何在提取出的特征中检测物体</h3><ul>
<li><h4 id="Anchor机制："><a href="#Anchor机制：" class="headerlink" title="Anchor机制："></a>Anchor机制：</h4><ul>
<li><p>在目标检测任务中，输入图像经过骨干网络提取得到特征图，该图上的每个像素点，即为anchor锚点。简单来说RPN(Region Proposal Network)依靠一个在共享特征图上滑动的窗口，为每个位置(即：Anchor)生成9种预先设置好长宽比与面积的目标框。</p>
</li>
<li><p>以每个anchor为中心点，人为设置不同的尺度(scale)和长宽比(aspect ratio)，即可得到基于anchor的多个anchor box，用以框定图像中的目标，这就是所谓的anchor 机制。</p>
</li>
<li><h5 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h5><ul>
<li>使用anchor机制产生密集的anchor boxes，使得网络可直接在此基础上进行目标分类及边界框坐标回归；</li>
<li>密集的anchor boxes可有效提高网络目标召回能力，对于小目标检测来说提升非常明显。</li>
</ul>
</li>
<li><h5 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h5><ul>
<li>anchor机制中，需要设定的超参：尺度(scale)和长宽比( aspect ratio)是比较难设计的。这需要较强的先验知识。</li>
<li>冗余框非常之多。这会造成正负样本严重不平衡问题，也是one-stage算法难以赶超two-stage算法的原因之一。</li>
<li>网络实质上是看不见anchor boxes的，在anchor boxes的基础上进行边界回归更像是一种在范围比较小时候的强行记忆。</li>
</ul>
</li>
</ul>
</li>
<li><h4 id="Anchor-based-3D-box-generation：提取的特征为俯视图。2D的detect-head-放在每一个pixel。"><a href="#Anchor-based-3D-box-generation：提取的特征为俯视图。2D的detect-head-放在每一个pixel。" class="headerlink" title="Anchor-based 3D box generation：提取的特征为俯视图。2D的detect head 放在每一个pixel。"></a>Anchor-based 3D box generation：提取的特征为俯视图。2D的detect head 放在每一个pixel。</h4><ul>
<li><h5 id="PIXOR"><a href="#PIXOR" class="headerlink" title="PIXOR:"></a>PIXOR:</h5><p>3D 点云—&gt;切片投影表示—&gt;2D anchor detector—&gt;3D BEV detection</p>
</li>
<li><h5 id="SECOND："><a href="#SECOND：" class="headerlink" title="SECOND："></a>SECOND：</h5><p>点云—&gt;特征学习网络—&gt;体素特征提取—&gt;<em><strong><u>稀疏卷积</u></strong></em>—&gt;区域提案网络—&gt;（分类器，分类框）</p>
</li>
<li><h5 id="VoxelNet：-使用MLP进行max-pooling，使用高维保存信息"><a href="#VoxelNet：-使用MLP进行max-pooling，使用高维保存信息" class="headerlink" title="VoxelNet：(使用MLP进行max pooling，使用高维保存信息)"></a>VoxelNet：(<em><strong><u>使用MLP进行max pooling，使用高维保存信息</u></strong></em>)</h5><p>点云—&gt;特征学习网络—&gt;卷积中间层—&gt;区域提案网络—&gt;结果</p>
</li>
<li><h5 id="Pointpillar：压缩到2D-Feature-Map上"><a href="#Pointpillar：压缩到2D-Feature-Map上" class="headerlink" title="Pointpillar：压缩到2D Feature Map上"></a>Pointpillar：压缩到2D Feature Map上</h5><p>点云—&gt;Pillar Feature Map (点云—&gt;stacked pillars—&gt;learned feature—&gt;pseudo image)—&gt;Backbone(2D CNN)—&gt;SSD—&gt;Prediction</p>
</li>
</ul>
</li>
<li><h4 id="Anchor-free-3D-box-generation"><a href="#Anchor-free-3D-box-generation" class="headerlink" title="Anchor-free 3D box generation:"></a>Anchor-free 3D box generation:</h4><ul>
<li><h5 id="Point-RCNN-从前景点中产生"><a href="#Point-RCNN-从前景点中产生" class="headerlink" title="Point-RCNN: 从前景点中产生"></a>Point-RCNN: 从前景点中产生</h5><p>点云—&gt;Encoder—&gt;Decoder—&gt;Point-wise feature vector—&gt;（前景点分割, bin-based 3D box generation）</p>
</li>
</ul>
</li>
</ul>
</li>
<li><h3 id="Voxel-based-VS-point-based"><a href="#Voxel-based-VS-point-based" class="headerlink" title="Voxel-based VS point-based"></a>Voxel-based VS point-based</h3></li>
</ul>
<p>Point-based: 由N个D维的点组成，当这个D = 3的时候一般代表着(x,y,z)的坐标，当然也可以包括一些法向量、强度等别的特征。</p>
<p>Voxel-based:由三维栅格将物体用0和1表征。</p>
<p>Mesh: 由三角面片和正方形面片组成。</p>
<ul>
<li><h3 id="3D-box-generation-是否基于anchor"><a href="#3D-box-generation-是否基于anchor" class="headerlink" title="3D box generation (是否基于anchor)"></a>3D box generation (是否基于anchor)</h3></li>
</ul>
<ul>
<li><h3 id="One-stage-VS-Two-stage-都为Anchor-based"><a href="#One-stage-VS-Two-stage-都为Anchor-based" class="headerlink" title="One-stage VS Two-stage (都为Anchor-based)"></a>One-stage VS Two-stage (都为Anchor-based)</h3><ul>
<li>One-stage: One-Stage的思想是将图像划分为S×S的小格子，即直接在特征图上对anchor进行回归以及类别预测。这样的做法避免了随机搜索得到region proposal，也避免了重复卷积运算，所以计算效率很高，检测速度非常快，但是由于缺乏搜索region proposal（即背景筛选），导致精度不是很高，还有一个原因就是图像中的小物体或者图像中挨得很近的多个物体会造成漏检。</li>
<li>Two-stage: Faster r-cnn由一个 rpn 网络和一个 region-wise 的预测网络（R-CNN）组成，然后预测目标。</li>
</ul>
</li>
</ul>
<h1 id="OpenPcDet-架构和实验"><a href="#OpenPcDet-架构和实验" class="headerlink" title="OpenPcDet 架构和实验"></a>OpenPcDet 架构和实验</h1><ul>
<li><h3 id="数据处理：从无序点云中提取特征"><a href="#数据处理：从无序点云中提取特征" class="headerlink" title="数据处理：从无序点云中提取特征"></a>数据处理：从无序点云中提取特征</h3><ul>
<li><h4 id="BEV-Map：投影到俯视图上。每个pixel有点为1，没有点为0。（损失高度信息）"><a href="#BEV-Map：投影到俯视图上。每个pixel有点为1，没有点为0。（损失高度信息）" class="headerlink" title="BEV Map：投影到俯视图上。每个pixel有点为1，没有点为0。（损失高度信息）"></a>BEV Map：投影到俯视图上。每个pixel有点为1，没有点为0。（损失高度信息）</h4></li>
<li><h4 id="3D-Voxel-CNN（or-spconv）使用体素特征编码（VFE）后使用稀疏卷积。"><a href="#3D-Voxel-CNN（or-spconv）使用体素特征编码（VFE）后使用稀疏卷积。" class="headerlink" title="3D Voxel CNN（or spconv）使用体素特征编码（VFE）后使用稀疏卷积。"></a>3D Voxel CNN（or spconv）使用体素特征编码（VFE）后使用稀疏卷积。</h4></li>
</ul>
</li>
<li><h3 id="产生3D-bbox"><a href="#产生3D-bbox" class="headerlink" title="产生3D bbox"></a>产生3D bbox</h3></li>
<li><h3 id="如何进行二阶段目标检测"><a href="#如何进行二阶段目标检测" class="headerlink" title="如何进行二阶段目标检测"></a>如何进行二阶段目标检测</h3></li>
<li><h3 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h3><ul>
<li>data:</li>
<li>pcdet:<ul>
<li>datasets：</li>
<li>models：</li>
<li>ops：对于3D目标检测C++,CUDA的代码</li>
<li>utils：公用的函数以及loss函数</li>
<li>config.py：定义的解析yaml的配置以及定义</li>
<li>init.py</li>
</ul>
</li>
<li>tools</li>
</ul>
</li>
</ul>
<p><img src="/Users/zhangzijun/Pictures/Markdown%E5%BC%95%E7%94%A8%E7%9A%84%E5%9B%BE%E7%89%87/OpenPCDet.png" alt="OpenPCDet"></p>
<h3 id="1-数据处理流程："><a href="#1-数据处理流程：" class="headerlink" title="1. 数据处理流程："></a>1. 数据处理流程：</h3><p><img src="/Users/zhangzijun/Pictures/Markdown%E5%BC%95%E7%94%A8%E7%9A%84%E5%9B%BE%E7%89%87/OpenPCDet%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.png" alt="OpenPCDet数据处理"></p>
<ul>
<li><h4 id="getitem-从磁盘上load数据，加载到统一的标准格式。"><a href="#getitem-从磁盘上load数据，加载到统一的标准格式。" class="headerlink" title="__getitem__:从磁盘上load数据，加载到统一的标准格式。"></a>__getitem__:从磁盘上load数据，加载到统一的标准格式。</h4></li>
<li><h4 id="data-augmentor-常用的数据增强（GT-sampling，随机旋转翻转，随机拉长）"><a href="#data-augmentor-常用的数据增强（GT-sampling，随机旋转翻转，随机拉长）" class="headerlink" title="data_augmentor:常用的数据增强（GT sampling，随机旋转翻转，随机拉长）"></a>data_augmentor:常用的数据增强（GT sampling，随机旋转翻转，随机拉长）</h4><h5 id="在该文件中定义所使用的函数，augmenter-utils-py定义函数实现，函数均为接收“gt-box”和“point”，返回data-dict。（-pcdet-datasets-augmentor-augmentor-py）"><a href="#在该文件中定义所使用的函数，augmenter-utils-py定义函数实现，函数均为接收“gt-box”和“point”，返回data-dict。（-pcdet-datasets-augmentor-augmentor-py）" class="headerlink" title="在该文件中定义所使用的函数，augmenter_utils.py定义函数实现，函数均为接收“gt_box”和“point”，返回data_dict。（/pcdet/datasets/augmentor/augmentor.py）"></a>在该文件中定义所使用的函数，augmenter_utils.py定义函数实现，函数均为接收“gt_box”和“point”，返回data_dict。（/pcdet/datasets/augmentor/augmentor.py）</h5><p>![OpenPCDet 数据增强](/Users/zhangzijun/Pictures/Markdown引用的图片/OpenPCDet 数据增强.png)</p>
<h5 id="在-tools-cfgs-datasets-configs-kitti-dataset-yaml中，定义处理kitti数据集使用到的augmenter的具体实现和参数细节。"><a href="#在-tools-cfgs-datasets-configs-kitti-dataset-yaml中，定义处理kitti数据集使用到的augmenter的具体实现和参数细节。" class="headerlink" title="在/tools/cfgs/datasets_configs/kitti_dataset.yaml中，定义处理kitti数据集使用到的augmenter的具体实现和参数细节。"></a>在/tools/cfgs/datasets_configs/kitti_dataset.yaml中，定义处理kitti数据集使用到的augmenter的具体实现和参数细节。</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DATA_AUGMENTOR:</span></span><br><span class="line">    <span class="attr">DISABLE_AUG_LIST:</span> [<span class="string">&#x27;placeholder&#x27;</span>]</span><br><span class="line">    <span class="attr">AUG_CONFIG_LIST:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">gt_sampling</span></span><br><span class="line">          <span class="attr">USE_ROAD_PLANE:</span> <span class="literal">True</span></span><br><span class="line">          <span class="attr">DB_INFO_PATH:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">kitti_dbinfos_train.pkl</span></span><br><span class="line">          <span class="attr">PREPARE:</span> &#123;</span><br><span class="line">             <span class="attr">filter_by_min_points:</span> [<span class="string">&#x27;Car:5&#x27;</span>, <span class="string">&#x27;Pedestrian:5&#x27;</span>, <span class="string">&#x27;Cyclist:5&#x27;</span>],</span><br><span class="line">             <span class="attr">filter_by_difficulty:</span> [<span class="number">-1</span>],</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="attr">SAMPLE_GROUPS:</span> [<span class="string">&#x27;Car:15&#x27;</span>,<span class="string">&#x27;Pedestrian:10&#x27;</span>, <span class="string">&#x27;Cyclist:10&#x27;</span>]</span><br><span class="line">          <span class="attr">NUM_POINT_FEATURES:</span> <span class="number">4</span></span><br><span class="line">          <span class="attr">DATABASE_WITH_FAKELIDAR:</span> <span class="literal">False</span></span><br><span class="line">          <span class="attr">REMOVE_EXTRA_WIDTH:</span> [<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>]</span><br><span class="line">          <span class="attr">LIMIT_WHOLE_SCENE:</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">random_world_flip</span></span><br><span class="line">          <span class="attr">ALONG_AXIS_LIST:</span> [<span class="string">&#x27;x&#x27;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">random_world_rotation</span></span><br><span class="line">          <span class="attr">WORLD_ROT_ANGLE:</span> [<span class="number">-0.78539816</span>, <span class="number">0.78539816</span>]</span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">random_world_scaling</span></span><br><span class="line">          <span class="attr">WORLD_SCALE_RANGE:</span> [<span class="number">0.95</span>, <span class="number">1.05</span>]</span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">random_world_translation</span></span><br><span class="line">          <span class="attr">WORLD_TRANSLATE_STD:</span> [<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.2</span>]</span><br></pre></td></tr></table></figure></li>
<li><h4 id="point-feature-encoder："><a href="#point-feature-encoder：" class="headerlink" title="point_feature_encoder："></a>point_feature_encoder：</h4><ul>
<li><h5 id="该步骤的输入：Data-dict-points-N-3-C-out-gt-box-N-7-C-gt-names-N-use-lead-xyz-bool"><a href="#该步骤的输入：Data-dict-points-N-3-C-out-gt-box-N-7-C-gt-names-N-use-lead-xyz-bool" class="headerlink" title="该步骤的输入：Data_dict: points(N, 3+C_out), gt_box(N, 7+C), gt_names(N), use_lead_xyz: bool"></a>该步骤的输入：Data_dict: points(N, 3+C_out), gt_box(N, 7+C), gt_names(N), use_lead_xyz: bool</h5></li>
</ul>
</li>
<li><h4 id="data-processor：数据进入model之前最后一步预处理"><a href="#data-processor：数据进入model之前最后一步预处理" class="headerlink" title="data_processor：数据进入model之前最后一步预处理"></a>data_processor：数据进入model之前最后一步预处理</h4><ul>
<li><h5 id="对得到的数据进行处理，比如去除不在框内的数据，打乱点的顺序，点的采样，得到Voxel等等。"><a href="#对得到的数据进行处理，比如去除不在框内的数据，打乱点的顺序，点的采样，得到Voxel等等。" class="headerlink" title="对得到的数据进行处理，比如去除不在框内的数据，打乱点的顺序，点的采样，得到Voxel等等。"></a>对得到的数据进行处理，比如去除不在框内的数据，打乱点的顺序，点的采样，得到Voxel等等。</h5><h5 id="含有两个类，class-VoxelGeneratorWrapper-和class-DataProcessor-object-，其中后者含有对象self-voxel-generator-True-or-False"><a href="#含有两个类，class-VoxelGeneratorWrapper-和class-DataProcessor-object-，其中后者含有对象self-voxel-generator-True-or-False" class="headerlink" title="含有两个类，class VoxelGeneratorWrapper()和class DataProcessor(object)，其中后者含有对象self.voxel_generator=True or False"></a>含有两个类，class VoxelGeneratorWrapper()和class DataProcessor(object)，其中后者含有对象self.voxel_generator=True or False</h5></li>
<li><h5 id="voxelize-output-voxels-M-T-3-C-out-C-out-voxels-coords-M-3-voxel-num-points-M-…"><a href="#voxelize-output-voxels-M-T-3-C-out-C-out-voxels-coords-M-3-voxel-num-points-M-…" class="headerlink" title="voxelize_output: voxels(M,T, (3+C_out)/C_out), voxels_coords(M,3), voxel_num_points(M)…"></a>voxelize_output: voxels(M,T, (3+C_out)/C_out), voxels_coords(M,3), voxel_num_points(M)…</h5></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DATA_PROCESSOR:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">mask_points_and_boxes_outside_range</span></span><br><span class="line">      <span class="attr">REMOVE_OUTSIDE_BOXES:</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">shuffle_points</span></span><br><span class="line">      <span class="attr">SHUFFLE_ENABLED:</span> &#123;</span><br><span class="line">        <span class="attr">&#x27;train&#x27;:</span> <span class="literal">True</span>,</span><br><span class="line">        <span class="attr">&#x27;test&#x27;:</span> <span class="literal">False</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">NAME:</span> <span class="string">transform_points_to_voxels</span></span><br><span class="line">      <span class="attr">VOXEL_SIZE:</span> [<span class="number">0.05</span>, <span class="number">0.05</span>, <span class="number">0.1</span>]</span><br><span class="line">      <span class="attr">MAX_POINTS_PER_VOXEL:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">MAX_NUMBER_OF_VOXELS:</span> &#123;</span><br><span class="line">        <span class="attr">&#x27;train&#x27;:</span> <span class="number">16000</span>,</span><br><span class="line">        <span class="attr">&#x27;test&#x27;:</span> <span class="number">40000</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li>
<li><h4 id="collate-batch-前面四个步骤是对一个数据进行处理，定义一个batch的处理方法，执行几遍然后进行cat连接。"><a href="#collate-batch-前面四个步骤是对一个数据进行处理，定义一个batch的处理方法，执行几遍然后进行cat连接。" class="headerlink" title="collate_batch:前面四个步骤是对一个数据进行处理，定义一个batch的处理方法，执行几遍然后进行cat连接。"></a>collate_batch:前面四个步骤是对一个数据进行处理，定义一个batch的处理方法，执行几遍然后进行cat连接。</h4><ul>
<li><h5 id="Batch-dict-points-N-i-3-C-out-gt-boxes-Batch-size-N-Max-7-C-Optional-voxels-M-sum-T-3-C-out-C-out-voxels-coords-M-sum-3-voxel-num-points-M-sum"><a href="#Batch-dict-points-N-i-3-C-out-gt-boxes-Batch-size-N-Max-7-C-Optional-voxels-M-sum-T-3-C-out-C-out-voxels-coords-M-sum-3-voxel-num-points-M-sum" class="headerlink" title="Batch_dict: points(N,i+3+C_out), gt_boxes(Batch_size, N_Max, 7+C).  (Optional)  voxels(M_sum,T, (3+C_out)/C_out), voxels_coords(M_sum,3), voxel_num_points(M_sum)"></a>Batch_dict: points(N,i+3+C_out), gt_boxes(Batch_size, N_Max, 7+C).  (Optional)  voxels(M_sum,T, (3+C_out)/C_out), voxels_coords(M_sum,3), voxel_num_points(M_sum)</h5></li>
</ul>
</li>
</ul>
<h3 id="2-模块处理流程："><a href="#2-模块处理流程：" class="headerlink" title="2.模块处理流程："></a>2.模块处理流程：</h3><p>![OpenPCDet Module](/Users/zhangzijun/Pictures/Markdown引用的图片/OpenPCDet Module.png)</p>
<ul>
<li><h3 id="3D-backbone-networks：（提取体素或点的特征）"><a href="#3D-backbone-networks：（提取体素或点的特征）" class="headerlink" title="3D backbone networks：（提取体素或点的特征）"></a>3D backbone networks：（提取体素或点的特征）</h3><ul>
<li><h4 id="3D-encoder-with-spconv（with-VFE）："><a href="#3D-encoder-with-spconv（with-VFE）：" class="headerlink" title="3D encoder with spconv（with VFE）："></a>3D encoder with spconv（with VFE）：</h4><ul>
<li><h5 id="VoxelBackBone8x"><a href="#VoxelBackBone8x" class="headerlink" title="VoxelBackBone8x"></a>VoxelBackBone8x</h5></li>
<li><h5 id="VoxelResBackBone8x"><a href="#VoxelResBackBone8x" class="headerlink" title="VoxelResBackBone8x"></a>VoxelResBackBone8x</h5></li>
</ul>
</li>
<li><h4 id="3D-UNet-with-spconv-with-VFE"><a href="#3D-UNet-with-spconv-with-VFE" class="headerlink" title="3D UNet with spconv (with VFE) :"></a>3D UNet with spconv (with VFE) :</h4><h5 id="UNetV2"><a href="#UNetV2" class="headerlink" title="UNetV2"></a>UNetV2</h5></li>
<li><h4 id="Point-wise-networks-PointNet"><a href="#Point-wise-networks-PointNet" class="headerlink" title="Point-wise networks (PointNet++)"></a>Point-wise networks (PointNet++)</h4><h5 id="PointNet2MSG"><a href="#PointNet2MSG" class="headerlink" title="PointNet2MSG"></a>PointNet2MSG</h5></li>
</ul>
</li>
<li><h3 id="2D-backbone-networks：（提取2D特征图）"><a href="#2D-backbone-networks：（提取2D特征图）" class="headerlink" title="2D backbone networks：（提取2D特征图）"></a>2D backbone networks：（提取2D特征图）</h3><ul>
<li><h4 id="Map-to-bev-module-Map-3D-features-to-2D-maps"><a href="#Map-to-bev-module-Map-3D-features-to-2D-maps" class="headerlink" title="Map_to_bev_module (Map 3D features to 2D maps):"></a>Map_to_bev_module (Map 3D features to 2D maps):</h4><ul>
<li><h5 id="HeightCompression：沿高度压缩"><a href="#HeightCompression：沿高度压缩" class="headerlink" title="HeightCompression：沿高度压缩"></a>HeightCompression：沿高度压缩</h5></li>
<li><h5 id="PointPillarScatter：pillar-wise的特征变成dense的2D特征图"><a href="#PointPillarScatter：pillar-wise的特征变成dense的2D特征图" class="headerlink" title="PointPillarScatter：pillar-wise的特征变成dense的2D特征图"></a>PointPillarScatter：pillar-wise的特征变成dense的2D特征图</h5></li>
</ul>
</li>
<li><h4 id="2D-convolution-encoder-with-FPN-like-upsampling"><a href="#2D-convolution-encoder-with-FPN-like-upsampling" class="headerlink" title="2D convolution encoder with FPN-like upsampling:"></a>2D convolution encoder with FPN-like upsampling:</h4><h5 id="BaseBEVBackbone（SECOND中）"><a href="#BaseBEVBackbone（SECOND中）" class="headerlink" title="BaseBEVBackbone（SECOND中）"></a>BaseBEVBackbone（SECOND中）</h5></li>
</ul>
</li>
<li><h3 id="Denseheads：（进行检测，产生3D-bbox）"><a href="#Denseheads：（进行检测，产生3D-bbox）" class="headerlink" title="Denseheads：（进行检测，产生3D bbox）"></a>Denseheads：（进行检测，产生3D bbox）</h3><ul>
<li><h4 id="Dense-head-with-BEV-features（AnchorHeadTemplate）："><a href="#Dense-head-with-BEV-features（AnchorHeadTemplate）：" class="headerlink" title="Dense head with BEV features（AnchorHeadTemplate）："></a>Dense head with BEV features（AnchorHeadTemplate）：</h4><h5 id="使用Anchor-Based的方法，使用模版后进行定义。"><a href="#使用Anchor-Based的方法，使用模版后进行定义。" class="headerlink" title="使用Anchor-Based的方法，使用模版后进行定义。"></a>使用Anchor-Based的方法，使用模版后进行定义。</h5><ul>
<li><h5 id="AnchorHeadSingle"><a href="#AnchorHeadSingle" class="headerlink" title="AnchorHeadSingle"></a>AnchorHeadSingle</h5></li>
<li><h5 id="AnchorHeadMulti（不同尺度的图均放置anchor）"><a href="#AnchorHeadMulti（不同尺度的图均放置anchor）" class="headerlink" title="AnchorHeadMulti（不同尺度的图均放置anchor）"></a>AnchorHeadMulti（不同尺度的图均放置anchor）</h5></li>
<li><h5 id="CenterHead（输出每个pixel的检测框）"><a href="#CenterHead（输出每个pixel的检测框）" class="headerlink" title="CenterHead（输出每个pixel的检测框）"></a>CenterHead（输出每个pixel的检测框）</h5></li>
</ul>
</li>
<li><h4 id="Dense-head-with-point-wise-features（PointHeadTemplate）："><a href="#Dense-head-with-point-wise-features（PointHeadTemplate）：" class="headerlink" title="Dense head with point-wise features（PointHeadTemplate）："></a>Dense head with point-wise features（PointHeadTemplate）：</h4><ul>
<li><h5 id="PointHeadSimple"><a href="#PointHeadSimple" class="headerlink" title="PointHeadSimple"></a>PointHeadSimple</h5></li>
<li><h5 id="PointHeadBox"><a href="#PointHeadBox" class="headerlink" title="PointHeadBox"></a>PointHeadBox</h5></li>
<li><h5 id="PointIntraPartOffsetHead"><a href="#PointIntraPartOffsetHead" class="headerlink" title="PointIntraPartOffsetHead"></a>PointIntraPartOffsetHead</h5></li>
</ul>
</li>
</ul>
</li>
<li><h3 id="ROIHeads：（二阶段检测，提取ROI-aligned特征，选出目标框，计算IOU损失）"><a href="#ROIHeads：（二阶段检测，提取ROI-aligned特征，选出目标框，计算IOU损失）" class="headerlink" title="ROIHeads：（二阶段检测，提取ROI-aligned特征，选出目标框，计算IOU损失）"></a>ROIHeads：（二阶段检测，提取ROI-aligned特征，选出目标框，计算IOU损失）</h3><ul>
<li><h4 id="Stage-II-ROI-refinement-ROIHeadTemplate"><a href="#Stage-II-ROI-refinement-ROIHeadTemplate" class="headerlink" title="Stage-II ROI refinement (ROIHeadTemplate):"></a>Stage-II ROI refinement (ROIHeadTemplate):</h4><ul>
<li><h5 id="PointRCNNHead"><a href="#PointRCNNHead" class="headerlink" title="PointRCNNHead"></a>PointRCNNHead</h5></li>
<li><h5 id="PartA2FCHead"><a href="#PartA2FCHead" class="headerlink" title="PartA2FCHead"></a>PartA2FCHead</h5></li>
<li><h5 id="PVRCNNHead"><a href="#PVRCNNHead" class="headerlink" title="PVRCNNHead"></a>PVRCNNHead</h5></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-配置文件："><a href="#3-配置文件：" class="headerlink" title="3. 配置文件："></a>3. 配置文件：</h2><p>![OpenPCDet yaml](/Users/zhangzijun/Pictures/Markdown引用的图片/OpenPCDet yaml.png)</p>
<h4 id="其中，DATA-CONFIG对应class-DatasetTemplate中的datasets-cfg处。"><a href="#其中，DATA-CONFIG对应class-DatasetTemplate中的datasets-cfg处。" class="headerlink" title="其中，DATA_CONFIG对应class DatasetTemplate中的datasets_cfg处。"></a>其中，DATA_CONFIG对应class DatasetTemplate中的datasets_cfg处。</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DatasetTemplate</span>(torch_data.Dataset):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, dataset_cfg=<span class="literal">None</span>, class_names=<span class="literal">None</span>, training=<span class="literal">True</span>, root_path=<span class="literal">None</span>, logger=<span class="literal">None</span></span>):</span><br></pre></td></tr></table></figure>

<h4 id="MODEL对应class-Detector3DTemplate中model-cfg处。"><a href="#MODEL对应class-Detector3DTemplate中model-cfg处。" class="headerlink" title="MODEL对应class Detector3DTemplate中model_cfg处。"></a>MODEL对应class Detector3DTemplate中model_cfg处。</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Detector3DTemplate</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model_cfg, num_class, dataset</span>):</span><br></pre></td></tr></table></figure>

<h4 id="DENSE-HEAD处对应class-AnchorHeadTemplate中的model-cfg处处。"><a href="#DENSE-HEAD处对应class-AnchorHeadTemplate中的model-cfg处处。" class="headerlink" title="DENSE_HEAD处对应class AnchorHeadTemplate中的model_cfg处处。"></a>DENSE_HEAD处对应class AnchorHeadTemplate中的model_cfg处处。</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AnchorHeadTemplate</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model_cfg, num_class, class_names, grid_size, point_cloud_range, predict_boxes_when_training</span>):</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/20/%E6%96%B0%E7%9A%84%E6%96%87%E7%AB%A0/" data-id="cl71705vl0001b19x6wn4dx0b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-first-article" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/19/first-article/" class="article-date">
  <time datetime="2022-08-19T13:43:57.000Z" itemprop="datePublished">2022-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/19/first-article/">first article</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/19/first-article/" data-id="cl71705vh0000b19xae9u7oje" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Hello-world-0" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/19/Hello-world-0/" class="article-date">
  <time datetime="2022-08-19T13:25:59.000Z" itemprop="datePublished">2022-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/19/Hello-world-0/">Hello world</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/19/Hello-world-0/" data-id="cl70i94ef0000ku9x80ws9par" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/18/hello-world/" class="article-date">
  <time datetime="2022-08-18T03:11:10.693Z" itemprop="datePublished">2022-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/18/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/18/hello-world/" data-id="cl70hhgyu0000wy9xapc8f5o7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/08/20/%E6%96%B0%E7%9A%84%E6%96%87%E7%AB%A0/">新的文章</a>
          </li>
        
          <li>
            <a href="/2022/08/19/first-article/">first article</a>
          </li>
        
          <li>
            <a href="/2022/08/19/Hello-world-0/">Hello world</a>
          </li>
        
          <li>
            <a href="/2022/08/18/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>